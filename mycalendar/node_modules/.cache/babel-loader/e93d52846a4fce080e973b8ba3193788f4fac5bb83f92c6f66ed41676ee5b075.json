{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\n\"use strict\";\n\n// eslint-disable-next-line n/prefer-global/process\nconst {\n  versions\n} = require(\"process\");\nconst AliasFieldPlugin = require(\"./AliasFieldPlugin\");\nconst AliasPlugin = require(\"./AliasPlugin\");\nconst AppendPlugin = require(\"./AppendPlugin\");\nconst ConditionalPlugin = require(\"./ConditionalPlugin\");\nconst DescriptionFilePlugin = require(\"./DescriptionFilePlugin\");\nconst DirectoryExistsPlugin = require(\"./DirectoryExistsPlugin\");\nconst ExportsFieldPlugin = require(\"./ExportsFieldPlugin\");\nconst ExtensionAliasPlugin = require(\"./ExtensionAliasPlugin\");\nconst FileExistsPlugin = require(\"./FileExistsPlugin\");\nconst ImportsFieldPlugin = require(\"./ImportsFieldPlugin\");\nconst JoinRequestPartPlugin = require(\"./JoinRequestPartPlugin\");\nconst JoinRequestPlugin = require(\"./JoinRequestPlugin\");\nconst MainFieldPlugin = require(\"./MainFieldPlugin\");\nconst ModulesInHierarchicalDirectoriesPlugin = require(\"./ModulesInHierarchicalDirectoriesPlugin\");\nconst ModulesInRootPlugin = require(\"./ModulesInRootPlugin\");\nconst NextPlugin = require(\"./NextPlugin\");\nconst ParsePlugin = require(\"./ParsePlugin\");\nconst PnpPlugin = require(\"./PnpPlugin\");\nconst Resolver = require(\"./Resolver\");\nconst RestrictionsPlugin = require(\"./RestrictionsPlugin\");\nconst ResultPlugin = require(\"./ResultPlugin\");\nconst RootsPlugin = require(\"./RootsPlugin\");\nconst SelfReferencePlugin = require(\"./SelfReferencePlugin\");\nconst SymlinkPlugin = require(\"./SymlinkPlugin\");\nconst SyncAsyncFileSystemDecorator = require(\"./SyncAsyncFileSystemDecorator\");\nconst TryNextPlugin = require(\"./TryNextPlugin\");\nconst UnsafeCachePlugin = require(\"./UnsafeCachePlugin\");\nconst UseFilePlugin = require(\"./UseFilePlugin\");\nconst {\n  PathType,\n  getType\n} = require(\"./util/path\");\n\n/** @typedef {import(\"./AliasPlugin\").AliasOption} AliasOptionEntry */\n/** @typedef {import(\"./ExtensionAliasPlugin\").ExtensionAliasOption} ExtensionAliasOption */\n/** @typedef {import(\"./PnpPlugin\").PnpApiImpl} PnpApi */\n/** @typedef {import(\"./Resolver\").EnsuredHooks} EnsuredHooks */\n/** @typedef {import(\"./Resolver\").FileSystem} FileSystem */\n/** @typedef {import(\"./Resolver\").KnownHooks} KnownHooks */\n/** @typedef {import(\"./Resolver\").ResolveRequest} ResolveRequest */\n/** @typedef {import(\"./Resolver\").SyncFileSystem} SyncFileSystem */\n/** @typedef {import(\"./UnsafeCachePlugin\").Cache} Cache */\n\n/** @typedef {string | string[] | false} AliasOptionNewRequest */\n/** @typedef {{ [k: string]: AliasOptionNewRequest }} AliasOptions */\n/** @typedef {{ [k: string]: string|string[] }} ExtensionAliasOptions */\n/** @typedef {false | 0 | \"\" | null | undefined} Falsy */\n/** @typedef {{apply: (resolver: Resolver) => void} | ((this: Resolver, resolver: Resolver) => void) | Falsy} Plugin */\n\n/**\n * @typedef {object} UserResolveOptions\n * @property {(AliasOptions | AliasOptionEntry[])=} alias A list of module alias configurations or an object which maps key to value\n * @property {(AliasOptions | AliasOptionEntry[])=} fallback A list of module alias configurations or an object which maps key to value, applied only after modules option\n * @property {ExtensionAliasOptions=} extensionAlias An object which maps extension to extension aliases\n * @property {(string | string[])[]=} aliasFields A list of alias fields in description files\n * @property {((predicate: ResolveRequest) => boolean)=} cachePredicate A function which decides whether a request should be cached or not. An object is passed with at least `path` and `request` properties.\n * @property {boolean=} cacheWithContext Whether or not the unsafeCache should include request context as part of the cache key.\n * @property {string[]=} descriptionFiles A list of description files to read from\n * @property {string[]=} conditionNames A list of exports field condition names.\n * @property {boolean=} enforceExtension Enforce that a extension from extensions must be used\n * @property {(string | string[])[]=} exportsFields A list of exports fields in description files\n * @property {(string | string[])[]=} importsFields A list of imports fields in description files\n * @property {string[]=} extensions A list of extensions which should be tried for files\n * @property {FileSystem} fileSystem The file system which should be used\n * @property {(Cache | boolean)=} unsafeCache Use this cache object to unsafely cache the successful requests\n * @property {boolean=} symlinks Resolve symlinks to their symlinked location\n * @property {Resolver=} resolver A prepared Resolver to which the plugins are attached\n * @property {string[] | string=} modules A list of directories to resolve modules from, can be absolute path or folder name\n * @property {(string | string[] | {name: string | string[], forceRelative: boolean})[]=} mainFields A list of main fields in description files\n * @property {string[]=} mainFiles A list of main files in directories\n * @property {Plugin[]=} plugins A list of additional resolve plugins which should be applied\n * @property {PnpApi | null=} pnpApi A PnP API that should be used - null is \"never\", undefined is \"auto\"\n * @property {string[]=} roots A list of root paths\n * @property {boolean=} fullySpecified The request is already fully specified and no extensions or directories are resolved for it\n * @property {boolean=} resolveToContext Resolve to a context instead of a file\n * @property {(string|RegExp)[]=} restrictions A list of resolve restrictions\n * @property {boolean=} useSyncFileSystemCalls Use only the sync constraints of the file system calls\n * @property {boolean=} preferRelative Prefer to resolve module requests as relative requests before falling back to modules\n * @property {boolean=} preferAbsolute Prefer to resolve server-relative urls as absolute paths before falling back to resolve in roots\n */\n\n/**\n * @typedef {object} ResolveOptions\n * @property {AliasOptionEntry[]} alias alias\n * @property {AliasOptionEntry[]} fallback fallback\n * @property {Set<string | string[]>} aliasFields alias fields\n * @property {ExtensionAliasOption[]} extensionAlias extension alias\n * @property {(predicate: ResolveRequest) => boolean} cachePredicate cache predicate\n * @property {boolean} cacheWithContext cache with context\n * @property {Set<string>} conditionNames A list of exports field condition names.\n * @property {string[]} descriptionFiles description files\n * @property {boolean} enforceExtension enforce extension\n * @property {Set<string | string[]>} exportsFields exports fields\n * @property {Set<string | string[]>} importsFields imports fields\n * @property {Set<string>} extensions extensions\n * @property {FileSystem} fileSystem fileSystem\n * @property {Cache | false} unsafeCache unsafe cache\n * @property {boolean} symlinks symlinks\n * @property {Resolver=} resolver resolver\n * @property {Array<string | string[]>} modules modules\n * @property {{ name: string[], forceRelative: boolean }[]} mainFields main fields\n * @property {Set<string>} mainFiles main files\n * @property {Plugin[]} plugins plugins\n * @property {PnpApi | null} pnpApi pnp API\n * @property {Set<string>} roots roots\n * @property {boolean} fullySpecified fully specified\n * @property {boolean} resolveToContext resolve to context\n * @property {Set<string | RegExp>} restrictions restrictions\n * @property {boolean} preferRelative prefer relative\n * @property {boolean} preferAbsolute prefer absolute\n */\n\n/**\n * @param {PnpApi | null=} option option\n * @returns {PnpApi | null} processed option\n */\nfunction processPnpApiOption(option) {\n  if (option === undefined && /** @type {NodeJS.ProcessVersions & {pnp: string}} */versions.pnp) {\n    const _findPnpApi = /** @type {(issuer: string) => PnpApi | null}} */\n\n    // @ts-expect-error maybe nothing\n    require(\"module\").findPnpApi;\n    if (_findPnpApi) {\n      return {\n        resolveToUnqualified(request, issuer, opts) {\n          const pnpapi = _findPnpApi(issuer);\n          if (!pnpapi) {\n            // Issuer isn't managed by PnP\n            return null;\n          }\n          return pnpapi.resolveToUnqualified(request, issuer, opts);\n        }\n      };\n    }\n  }\n  return option || null;\n}\n\n/**\n * @param {AliasOptions | AliasOptionEntry[] | undefined} alias alias\n * @returns {AliasOptionEntry[]} normalized aliases\n */\nfunction normalizeAlias(alias) {\n  return typeof alias === \"object\" && !Array.isArray(alias) && alias !== null ? Object.keys(alias).map(key => {\n    /** @type {AliasOptionEntry} */\n    const obj = {\n      name: key,\n      onlyModule: false,\n      alias: alias[key]\n    };\n    if (/\\$$/.test(key)) {\n      obj.onlyModule = true;\n      obj.name = key.slice(0, -1);\n    }\n    return obj;\n  }) : /** @type {Array<AliasOptionEntry>} */alias || [];\n}\n\n/**\n * Merging filtered elements\n * @param {string[]} array source array\n * @param {(item: string) => boolean} filter predicate\n * @returns {Array<string | string[]>} merge result\n */\nfunction mergeFilteredToArray(array, filter) {\n  /** @type {Array<string | string[]>} */\n  const result = [];\n  const set = new Set(array);\n  for (const item of set) {\n    if (filter(item)) {\n      const lastElement = result.length > 0 ? result[result.length - 1] : undefined;\n      if (Array.isArray(lastElement)) {\n        lastElement.push(item);\n      } else {\n        result.push([item]);\n      }\n    } else {\n      result.push(item);\n    }\n  }\n  return result;\n}\n\n/**\n * @param {UserResolveOptions} options input options\n * @returns {ResolveOptions} output options\n */\nfunction createOptions(options) {\n  const mainFieldsSet = new Set(options.mainFields || [\"main\"]);\n  /** @type {ResolveOptions[\"mainFields\"]} */\n  const mainFields = [];\n  for (const item of mainFieldsSet) {\n    if (typeof item === \"string\") {\n      mainFields.push({\n        name: [item],\n        forceRelative: true\n      });\n    } else if (Array.isArray(item)) {\n      mainFields.push({\n        name: item,\n        forceRelative: true\n      });\n    } else {\n      mainFields.push({\n        name: Array.isArray(item.name) ? item.name : [item.name],\n        forceRelative: item.forceRelative\n      });\n    }\n  }\n  return {\n    alias: normalizeAlias(options.alias),\n    fallback: normalizeAlias(options.fallback),\n    aliasFields: new Set(options.aliasFields),\n    cachePredicate: options.cachePredicate || function trueFn() {\n      return true;\n    },\n    cacheWithContext: typeof options.cacheWithContext !== \"undefined\" ? options.cacheWithContext : true,\n    exportsFields: new Set(options.exportsFields || [\"exports\"]),\n    importsFields: new Set(options.importsFields || [\"imports\"]),\n    conditionNames: new Set(options.conditionNames),\n    descriptionFiles: [...new Set(options.descriptionFiles || [\"package.json\"])],\n    enforceExtension: options.enforceExtension === undefined ? Boolean(options.extensions && options.extensions.includes(\"\")) : options.enforceExtension,\n    extensions: new Set(options.extensions || [\".js\", \".json\", \".node\"]),\n    extensionAlias: options.extensionAlias ? Object.keys(options.extensionAlias).map(k => ({\n      extension: k,\n      alias: /** @type {ExtensionAliasOptions} */options.extensionAlias[k]\n    })) : [],\n    fileSystem: options.useSyncFileSystemCalls ? new SyncAsyncFileSystemDecorator(/** @type {SyncFileSystem} */\n    /** @type {unknown} */options.fileSystem) : options.fileSystem,\n    unsafeCache: options.unsafeCache && typeof options.unsafeCache !== \"object\" ? (/** @type {Cache} */{}) : options.unsafeCache || false,\n    symlinks: typeof options.symlinks !== \"undefined\" ? options.symlinks : true,\n    resolver: options.resolver,\n    modules: mergeFilteredToArray(Array.isArray(options.modules) ? options.modules : options.modules ? [options.modules] : [\"node_modules\"], item => {\n      const type = getType(item);\n      return type === PathType.Normal || type === PathType.Relative;\n    }),\n    mainFields,\n    mainFiles: new Set(options.mainFiles || [\"index\"]),\n    plugins: options.plugins || [],\n    pnpApi: processPnpApiOption(options.pnpApi),\n    roots: new Set(options.roots || undefined),\n    fullySpecified: options.fullySpecified || false,\n    resolveToContext: options.resolveToContext || false,\n    preferRelative: options.preferRelative || false,\n    preferAbsolute: options.preferAbsolute || false,\n    restrictions: new Set(options.restrictions)\n  };\n}\n\n/**\n * @param {UserResolveOptions} options resolve options\n * @returns {Resolver} created resolver\n */\nmodule.exports.createResolver = function createResolver(options) {\n  const normalizedOptions = createOptions(options);\n  const {\n    alias,\n    fallback,\n    aliasFields,\n    cachePredicate,\n    cacheWithContext,\n    conditionNames,\n    descriptionFiles,\n    enforceExtension,\n    exportsFields,\n    extensionAlias,\n    importsFields,\n    extensions,\n    fileSystem,\n    fullySpecified,\n    mainFields,\n    mainFiles,\n    modules,\n    plugins: userPlugins,\n    pnpApi,\n    resolveToContext,\n    preferRelative,\n    preferAbsolute,\n    symlinks,\n    unsafeCache,\n    resolver: customResolver,\n    restrictions,\n    roots\n  } = normalizedOptions;\n  const plugins = [...userPlugins];\n  const resolver = customResolver || new Resolver(fileSystem, normalizedOptions);\n\n  // // pipeline ////\n\n  resolver.ensureHook(\"resolve\");\n  resolver.ensureHook(\"internalResolve\");\n  resolver.ensureHook(\"newInternalResolve\");\n  resolver.ensureHook(\"parsedResolve\");\n  resolver.ensureHook(\"describedResolve\");\n  resolver.ensureHook(\"rawResolve\");\n  resolver.ensureHook(\"normalResolve\");\n  resolver.ensureHook(\"internal\");\n  resolver.ensureHook(\"rawModule\");\n  resolver.ensureHook(\"alternateRawModule\");\n  resolver.ensureHook(\"module\");\n  resolver.ensureHook(\"resolveAsModule\");\n  resolver.ensureHook(\"undescribedResolveInPackage\");\n  resolver.ensureHook(\"resolveInPackage\");\n  resolver.ensureHook(\"resolveInExistingDirectory\");\n  resolver.ensureHook(\"relative\");\n  resolver.ensureHook(\"describedRelative\");\n  resolver.ensureHook(\"directory\");\n  resolver.ensureHook(\"undescribedExistingDirectory\");\n  resolver.ensureHook(\"existingDirectory\");\n  resolver.ensureHook(\"undescribedRawFile\");\n  resolver.ensureHook(\"rawFile\");\n  resolver.ensureHook(\"file\");\n  resolver.ensureHook(\"finalFile\");\n  resolver.ensureHook(\"existingFile\");\n  resolver.ensureHook(\"resolved\");\n\n  // TODO remove in next major\n  // cspell:word Interal\n  // Backward-compat\n  // @ts-expect-error\n  resolver.hooks.newInteralResolve = resolver.hooks.newInternalResolve;\n\n  // resolve\n  for (const {\n    source,\n    resolveOptions\n  } of [{\n    source: \"resolve\",\n    resolveOptions: {\n      fullySpecified\n    }\n  }, {\n    source: \"internal-resolve\",\n    resolveOptions: {\n      fullySpecified: false\n    }\n  }]) {\n    if (unsafeCache) {\n      plugins.push(new UnsafeCachePlugin(source, cachePredicate, /** @type {import(\"./UnsafeCachePlugin\").Cache} */unsafeCache, cacheWithContext, `new-${source}`));\n      plugins.push(new ParsePlugin(`new-${source}`, resolveOptions, \"parsed-resolve\"));\n    } else {\n      plugins.push(new ParsePlugin(source, resolveOptions, \"parsed-resolve\"));\n    }\n  }\n\n  // parsed-resolve\n  plugins.push(new DescriptionFilePlugin(\"parsed-resolve\", descriptionFiles, false, \"described-resolve\"));\n  plugins.push(new NextPlugin(\"after-parsed-resolve\", \"described-resolve\"));\n\n  // described-resolve\n  plugins.push(new NextPlugin(\"described-resolve\", \"raw-resolve\"));\n  if (fallback.length > 0) {\n    plugins.push(new AliasPlugin(\"described-resolve\", fallback, \"internal-resolve\"));\n  }\n\n  // raw-resolve\n  if (alias.length > 0) {\n    plugins.push(new AliasPlugin(\"raw-resolve\", alias, \"internal-resolve\"));\n  }\n  for (const item of aliasFields) {\n    plugins.push(new AliasFieldPlugin(\"raw-resolve\", item, \"internal-resolve\"));\n  }\n  for (const item of extensionAlias) {\n    plugins.push(new ExtensionAliasPlugin(\"raw-resolve\", item, \"normal-resolve\"));\n  }\n  plugins.push(new NextPlugin(\"raw-resolve\", \"normal-resolve\"));\n\n  // normal-resolve\n  if (preferRelative) {\n    plugins.push(new JoinRequestPlugin(\"after-normal-resolve\", \"relative\"));\n  }\n  plugins.push(new ConditionalPlugin(\"after-normal-resolve\", {\n    module: true\n  }, \"resolve as module\", false, \"raw-module\"));\n  plugins.push(new ConditionalPlugin(\"after-normal-resolve\", {\n    internal: true\n  }, \"resolve as internal import\", false, \"internal\"));\n  if (preferAbsolute) {\n    plugins.push(new JoinRequestPlugin(\"after-normal-resolve\", \"relative\"));\n  }\n  if (roots.size > 0) {\n    plugins.push(new RootsPlugin(\"after-normal-resolve\", roots, \"relative\"));\n  }\n  if (!preferRelative && !preferAbsolute) {\n    plugins.push(new JoinRequestPlugin(\"after-normal-resolve\", \"relative\"));\n  }\n\n  // internal\n  for (const importsField of importsFields) {\n    plugins.push(new ImportsFieldPlugin(\"internal\", conditionNames, importsField, \"relative\", \"internal-resolve\"));\n  }\n\n  // raw-module\n  for (const exportsField of exportsFields) {\n    plugins.push(new SelfReferencePlugin(\"raw-module\", exportsField, \"resolve-as-module\"));\n  }\n  for (const item of modules) {\n    if (Array.isArray(item)) {\n      if (item.includes(\"node_modules\") && pnpApi) {\n        plugins.push(new ModulesInHierarchicalDirectoriesPlugin(\"raw-module\", item.filter(i => i !== \"node_modules\"), \"module\"));\n        plugins.push(new PnpPlugin(\"raw-module\", pnpApi, \"undescribed-resolve-in-package\", \"alternate-raw-module\"));\n        plugins.push(new ModulesInHierarchicalDirectoriesPlugin(\"alternate-raw-module\", [\"node_modules\"], \"module\"));\n      } else {\n        plugins.push(new ModulesInHierarchicalDirectoriesPlugin(\"raw-module\", item, \"module\"));\n      }\n    } else {\n      plugins.push(new ModulesInRootPlugin(\"raw-module\", item, \"module\"));\n    }\n  }\n\n  // module\n  plugins.push(new JoinRequestPartPlugin(\"module\", \"resolve-as-module\"));\n\n  // resolve-as-module\n  if (!resolveToContext) {\n    plugins.push(new ConditionalPlugin(\"resolve-as-module\", {\n      directory: false,\n      request: \".\"\n    }, \"single file module\", true, \"undescribed-raw-file\"));\n  }\n  plugins.push(new DirectoryExistsPlugin(\"resolve-as-module\", \"undescribed-resolve-in-package\"));\n\n  // undescribed-resolve-in-package\n  plugins.push(new DescriptionFilePlugin(\"undescribed-resolve-in-package\", descriptionFiles, false, \"resolve-in-package\"));\n  plugins.push(new NextPlugin(\"after-undescribed-resolve-in-package\", \"resolve-in-package\"));\n\n  // resolve-in-package\n  for (const exportsField of exportsFields) {\n    plugins.push(new ExportsFieldPlugin(\"resolve-in-package\", conditionNames, exportsField, \"relative\"));\n  }\n  plugins.push(new NextPlugin(\"resolve-in-package\", \"resolve-in-existing-directory\"));\n\n  // resolve-in-existing-directory\n  plugins.push(new JoinRequestPlugin(\"resolve-in-existing-directory\", \"relative\"));\n\n  // relative\n  plugins.push(new DescriptionFilePlugin(\"relative\", descriptionFiles, true, \"described-relative\"));\n  plugins.push(new NextPlugin(\"after-relative\", \"described-relative\"));\n\n  // described-relative\n  if (resolveToContext) {\n    plugins.push(new NextPlugin(\"described-relative\", \"directory\"));\n  } else {\n    plugins.push(new ConditionalPlugin(\"described-relative\", {\n      directory: false\n    }, null, true, \"raw-file\"));\n    plugins.push(new ConditionalPlugin(\"described-relative\", {\n      fullySpecified: false\n    }, \"as directory\", true, \"directory\"));\n  }\n\n  // directory\n  plugins.push(new DirectoryExistsPlugin(\"directory\", \"undescribed-existing-directory\"));\n  if (resolveToContext) {\n    // undescribed-existing-directory\n    plugins.push(new NextPlugin(\"undescribed-existing-directory\", \"resolved\"));\n  } else {\n    // undescribed-existing-directory\n    plugins.push(new DescriptionFilePlugin(\"undescribed-existing-directory\", descriptionFiles, false, \"existing-directory\"));\n    for (const item of mainFiles) {\n      plugins.push(new UseFilePlugin(\"undescribed-existing-directory\", item, \"undescribed-raw-file\"));\n    }\n\n    // described-existing-directory\n    for (const item of mainFields) {\n      plugins.push(new MainFieldPlugin(\"existing-directory\", item, \"resolve-in-existing-directory\"));\n    }\n    for (const item of mainFiles) {\n      plugins.push(new UseFilePlugin(\"existing-directory\", item, \"undescribed-raw-file\"));\n    }\n\n    // undescribed-raw-file\n    plugins.push(new DescriptionFilePlugin(\"undescribed-raw-file\", descriptionFiles, true, \"raw-file\"));\n    plugins.push(new NextPlugin(\"after-undescribed-raw-file\", \"raw-file\"));\n\n    // raw-file\n    plugins.push(new ConditionalPlugin(\"raw-file\", {\n      fullySpecified: true\n    }, null, false, \"file\"));\n    if (!enforceExtension) {\n      plugins.push(new TryNextPlugin(\"raw-file\", \"no extension\", \"file\"));\n    }\n    for (const item of extensions) {\n      plugins.push(new AppendPlugin(\"raw-file\", item, \"file\"));\n    }\n\n    // file\n    if (alias.length > 0) {\n      plugins.push(new AliasPlugin(\"file\", alias, \"internal-resolve\"));\n    }\n    for (const item of aliasFields) {\n      plugins.push(new AliasFieldPlugin(\"file\", item, \"internal-resolve\"));\n    }\n    plugins.push(new NextPlugin(\"file\", \"final-file\"));\n\n    // final-file\n    plugins.push(new FileExistsPlugin(\"final-file\", \"existing-file\"));\n\n    // existing-file\n    if (symlinks) {\n      plugins.push(new SymlinkPlugin(\"existing-file\", \"existing-file\"));\n    }\n    plugins.push(new NextPlugin(\"existing-file\", \"resolved\"));\n  }\n  const {\n    resolved\n  } = /** @type {KnownHooks & EnsuredHooks} */\n  resolver.hooks;\n\n  // resolved\n  if (restrictions.size > 0) {\n    plugins.push(new RestrictionsPlugin(resolved, restrictions));\n  }\n  plugins.push(new ResultPlugin(resolved));\n\n  // // RESOLVER ////\n\n  for (const plugin of plugins) {\n    if (typeof plugin === \"function\") {\n      /** @type {(this: Resolver, resolver: Resolver) => void} */\n      plugin.call(resolver, resolver);\n    } else if (plugin) {\n      plugin.apply(resolver);\n    }\n  }\n  return resolver;\n};","map":{"version":3,"names":["versions","require","AliasFieldPlugin","AliasPlugin","AppendPlugin","ConditionalPlugin","DescriptionFilePlugin","DirectoryExistsPlugin","ExportsFieldPlugin","ExtensionAliasPlugin","FileExistsPlugin","ImportsFieldPlugin","JoinRequestPartPlugin","JoinRequestPlugin","MainFieldPlugin","ModulesInHierarchicalDirectoriesPlugin","ModulesInRootPlugin","NextPlugin","ParsePlugin","PnpPlugin","Resolver","RestrictionsPlugin","ResultPlugin","RootsPlugin","SelfReferencePlugin","SymlinkPlugin","SyncAsyncFileSystemDecorator","TryNextPlugin","UnsafeCachePlugin","UseFilePlugin","PathType","getType","processPnpApiOption","option","undefined","pnp","_findPnpApi","findPnpApi","resolveToUnqualified","request","issuer","opts","pnpapi","normalizeAlias","alias","Array","isArray","Object","keys","map","key","obj","name","onlyModule","test","slice","mergeFilteredToArray","array","filter","result","set","Set","item","lastElement","length","push","createOptions","options","mainFieldsSet","mainFields","forceRelative","fallback","aliasFields","cachePredicate","trueFn","cacheWithContext","exportsFields","importsFields","conditionNames","descriptionFiles","enforceExtension","Boolean","extensions","includes","extensionAlias","k","extension","fileSystem","useSyncFileSystemCalls","unsafeCache","symlinks","resolver","modules","type","Normal","Relative","mainFiles","plugins","pnpApi","roots","fullySpecified","resolveToContext","preferRelative","preferAbsolute","restrictions","module","exports","createResolver","normalizedOptions","userPlugins","customResolver","ensureHook","hooks","newInteralResolve","newInternalResolve","source","resolveOptions","internal","size","importsField","exportsField","i","directory","resolved","plugin","call","apply"],"sources":["C:/Users/dah03/calendar/mycalendar/node_modules/enhanced-resolve/lib/ResolverFactory.js"],"sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\n\"use strict\";\n\n// eslint-disable-next-line n/prefer-global/process\nconst { versions } = require(\"process\");\n\nconst AliasFieldPlugin = require(\"./AliasFieldPlugin\");\nconst AliasPlugin = require(\"./AliasPlugin\");\nconst AppendPlugin = require(\"./AppendPlugin\");\nconst ConditionalPlugin = require(\"./ConditionalPlugin\");\nconst DescriptionFilePlugin = require(\"./DescriptionFilePlugin\");\nconst DirectoryExistsPlugin = require(\"./DirectoryExistsPlugin\");\nconst ExportsFieldPlugin = require(\"./ExportsFieldPlugin\");\nconst ExtensionAliasPlugin = require(\"./ExtensionAliasPlugin\");\nconst FileExistsPlugin = require(\"./FileExistsPlugin\");\nconst ImportsFieldPlugin = require(\"./ImportsFieldPlugin\");\nconst JoinRequestPartPlugin = require(\"./JoinRequestPartPlugin\");\nconst JoinRequestPlugin = require(\"./JoinRequestPlugin\");\nconst MainFieldPlugin = require(\"./MainFieldPlugin\");\nconst ModulesInHierarchicalDirectoriesPlugin = require(\"./ModulesInHierarchicalDirectoriesPlugin\");\nconst ModulesInRootPlugin = require(\"./ModulesInRootPlugin\");\nconst NextPlugin = require(\"./NextPlugin\");\nconst ParsePlugin = require(\"./ParsePlugin\");\nconst PnpPlugin = require(\"./PnpPlugin\");\nconst Resolver = require(\"./Resolver\");\nconst RestrictionsPlugin = require(\"./RestrictionsPlugin\");\nconst ResultPlugin = require(\"./ResultPlugin\");\nconst RootsPlugin = require(\"./RootsPlugin\");\nconst SelfReferencePlugin = require(\"./SelfReferencePlugin\");\nconst SymlinkPlugin = require(\"./SymlinkPlugin\");\nconst SyncAsyncFileSystemDecorator = require(\"./SyncAsyncFileSystemDecorator\");\nconst TryNextPlugin = require(\"./TryNextPlugin\");\nconst UnsafeCachePlugin = require(\"./UnsafeCachePlugin\");\nconst UseFilePlugin = require(\"./UseFilePlugin\");\nconst { PathType, getType } = require(\"./util/path\");\n\n/** @typedef {import(\"./AliasPlugin\").AliasOption} AliasOptionEntry */\n/** @typedef {import(\"./ExtensionAliasPlugin\").ExtensionAliasOption} ExtensionAliasOption */\n/** @typedef {import(\"./PnpPlugin\").PnpApiImpl} PnpApi */\n/** @typedef {import(\"./Resolver\").EnsuredHooks} EnsuredHooks */\n/** @typedef {import(\"./Resolver\").FileSystem} FileSystem */\n/** @typedef {import(\"./Resolver\").KnownHooks} KnownHooks */\n/** @typedef {import(\"./Resolver\").ResolveRequest} ResolveRequest */\n/** @typedef {import(\"./Resolver\").SyncFileSystem} SyncFileSystem */\n/** @typedef {import(\"./UnsafeCachePlugin\").Cache} Cache */\n\n/** @typedef {string | string[] | false} AliasOptionNewRequest */\n/** @typedef {{ [k: string]: AliasOptionNewRequest }} AliasOptions */\n/** @typedef {{ [k: string]: string|string[] }} ExtensionAliasOptions */\n/** @typedef {false | 0 | \"\" | null | undefined} Falsy */\n/** @typedef {{apply: (resolver: Resolver) => void} | ((this: Resolver, resolver: Resolver) => void) | Falsy} Plugin */\n\n/**\n * @typedef {object} UserResolveOptions\n * @property {(AliasOptions | AliasOptionEntry[])=} alias A list of module alias configurations or an object which maps key to value\n * @property {(AliasOptions | AliasOptionEntry[])=} fallback A list of module alias configurations or an object which maps key to value, applied only after modules option\n * @property {ExtensionAliasOptions=} extensionAlias An object which maps extension to extension aliases\n * @property {(string | string[])[]=} aliasFields A list of alias fields in description files\n * @property {((predicate: ResolveRequest) => boolean)=} cachePredicate A function which decides whether a request should be cached or not. An object is passed with at least `path` and `request` properties.\n * @property {boolean=} cacheWithContext Whether or not the unsafeCache should include request context as part of the cache key.\n * @property {string[]=} descriptionFiles A list of description files to read from\n * @property {string[]=} conditionNames A list of exports field condition names.\n * @property {boolean=} enforceExtension Enforce that a extension from extensions must be used\n * @property {(string | string[])[]=} exportsFields A list of exports fields in description files\n * @property {(string | string[])[]=} importsFields A list of imports fields in description files\n * @property {string[]=} extensions A list of extensions which should be tried for files\n * @property {FileSystem} fileSystem The file system which should be used\n * @property {(Cache | boolean)=} unsafeCache Use this cache object to unsafely cache the successful requests\n * @property {boolean=} symlinks Resolve symlinks to their symlinked location\n * @property {Resolver=} resolver A prepared Resolver to which the plugins are attached\n * @property {string[] | string=} modules A list of directories to resolve modules from, can be absolute path or folder name\n * @property {(string | string[] | {name: string | string[], forceRelative: boolean})[]=} mainFields A list of main fields in description files\n * @property {string[]=} mainFiles A list of main files in directories\n * @property {Plugin[]=} plugins A list of additional resolve plugins which should be applied\n * @property {PnpApi | null=} pnpApi A PnP API that should be used - null is \"never\", undefined is \"auto\"\n * @property {string[]=} roots A list of root paths\n * @property {boolean=} fullySpecified The request is already fully specified and no extensions or directories are resolved for it\n * @property {boolean=} resolveToContext Resolve to a context instead of a file\n * @property {(string|RegExp)[]=} restrictions A list of resolve restrictions\n * @property {boolean=} useSyncFileSystemCalls Use only the sync constraints of the file system calls\n * @property {boolean=} preferRelative Prefer to resolve module requests as relative requests before falling back to modules\n * @property {boolean=} preferAbsolute Prefer to resolve server-relative urls as absolute paths before falling back to resolve in roots\n */\n\n/**\n * @typedef {object} ResolveOptions\n * @property {AliasOptionEntry[]} alias alias\n * @property {AliasOptionEntry[]} fallback fallback\n * @property {Set<string | string[]>} aliasFields alias fields\n * @property {ExtensionAliasOption[]} extensionAlias extension alias\n * @property {(predicate: ResolveRequest) => boolean} cachePredicate cache predicate\n * @property {boolean} cacheWithContext cache with context\n * @property {Set<string>} conditionNames A list of exports field condition names.\n * @property {string[]} descriptionFiles description files\n * @property {boolean} enforceExtension enforce extension\n * @property {Set<string | string[]>} exportsFields exports fields\n * @property {Set<string | string[]>} importsFields imports fields\n * @property {Set<string>} extensions extensions\n * @property {FileSystem} fileSystem fileSystem\n * @property {Cache | false} unsafeCache unsafe cache\n * @property {boolean} symlinks symlinks\n * @property {Resolver=} resolver resolver\n * @property {Array<string | string[]>} modules modules\n * @property {{ name: string[], forceRelative: boolean }[]} mainFields main fields\n * @property {Set<string>} mainFiles main files\n * @property {Plugin[]} plugins plugins\n * @property {PnpApi | null} pnpApi pnp API\n * @property {Set<string>} roots roots\n * @property {boolean} fullySpecified fully specified\n * @property {boolean} resolveToContext resolve to context\n * @property {Set<string | RegExp>} restrictions restrictions\n * @property {boolean} preferRelative prefer relative\n * @property {boolean} preferAbsolute prefer absolute\n */\n\n/**\n * @param {PnpApi | null=} option option\n * @returns {PnpApi | null} processed option\n */\nfunction processPnpApiOption(option) {\n\tif (\n\t\toption === undefined &&\n\t\t/** @type {NodeJS.ProcessVersions & {pnp: string}} */ versions.pnp\n\t) {\n\t\tconst _findPnpApi =\n\t\t\t/** @type {(issuer: string) => PnpApi | null}} */\n\t\t\t(\n\t\t\t\t// @ts-expect-error maybe nothing\n\t\t\t\trequire(\"module\").findPnpApi\n\t\t\t);\n\n\t\tif (_findPnpApi) {\n\t\t\treturn {\n\t\t\t\tresolveToUnqualified(request, issuer, opts) {\n\t\t\t\t\tconst pnpapi = _findPnpApi(issuer);\n\n\t\t\t\t\tif (!pnpapi) {\n\t\t\t\t\t\t// Issuer isn't managed by PnP\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn pnpapi.resolveToUnqualified(request, issuer, opts);\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\t}\n\n\treturn option || null;\n}\n\n/**\n * @param {AliasOptions | AliasOptionEntry[] | undefined} alias alias\n * @returns {AliasOptionEntry[]} normalized aliases\n */\nfunction normalizeAlias(alias) {\n\treturn typeof alias === \"object\" && !Array.isArray(alias) && alias !== null\n\t\t? Object.keys(alias).map((key) => {\n\t\t\t\t/** @type {AliasOptionEntry} */\n\t\t\t\tconst obj = { name: key, onlyModule: false, alias: alias[key] };\n\n\t\t\t\tif (/\\$$/.test(key)) {\n\t\t\t\t\tobj.onlyModule = true;\n\t\t\t\t\tobj.name = key.slice(0, -1);\n\t\t\t\t}\n\n\t\t\t\treturn obj;\n\t\t\t})\n\t\t: /** @type {Array<AliasOptionEntry>} */ (alias) || [];\n}\n\n/**\n * Merging filtered elements\n * @param {string[]} array source array\n * @param {(item: string) => boolean} filter predicate\n * @returns {Array<string | string[]>} merge result\n */\nfunction mergeFilteredToArray(array, filter) {\n\t/** @type {Array<string | string[]>} */\n\tconst result = [];\n\tconst set = new Set(array);\n\n\tfor (const item of set) {\n\t\tif (filter(item)) {\n\t\t\tconst lastElement =\n\t\t\t\tresult.length > 0 ? result[result.length - 1] : undefined;\n\t\t\tif (Array.isArray(lastElement)) {\n\t\t\t\tlastElement.push(item);\n\t\t\t} else {\n\t\t\t\tresult.push([item]);\n\t\t\t}\n\t\t} else {\n\t\t\tresult.push(item);\n\t\t}\n\t}\n\n\treturn result;\n}\n\n/**\n * @param {UserResolveOptions} options input options\n * @returns {ResolveOptions} output options\n */\nfunction createOptions(options) {\n\tconst mainFieldsSet = new Set(options.mainFields || [\"main\"]);\n\t/** @type {ResolveOptions[\"mainFields\"]} */\n\tconst mainFields = [];\n\n\tfor (const item of mainFieldsSet) {\n\t\tif (typeof item === \"string\") {\n\t\t\tmainFields.push({\n\t\t\t\tname: [item],\n\t\t\t\tforceRelative: true,\n\t\t\t});\n\t\t} else if (Array.isArray(item)) {\n\t\t\tmainFields.push({\n\t\t\t\tname: item,\n\t\t\t\tforceRelative: true,\n\t\t\t});\n\t\t} else {\n\t\t\tmainFields.push({\n\t\t\t\tname: Array.isArray(item.name) ? item.name : [item.name],\n\t\t\t\tforceRelative: item.forceRelative,\n\t\t\t});\n\t\t}\n\t}\n\n\treturn {\n\t\talias: normalizeAlias(options.alias),\n\t\tfallback: normalizeAlias(options.fallback),\n\t\taliasFields: new Set(options.aliasFields),\n\t\tcachePredicate:\n\t\t\toptions.cachePredicate ||\n\t\t\tfunction trueFn() {\n\t\t\t\treturn true;\n\t\t\t},\n\t\tcacheWithContext:\n\t\t\ttypeof options.cacheWithContext !== \"undefined\"\n\t\t\t\t? options.cacheWithContext\n\t\t\t\t: true,\n\t\texportsFields: new Set(options.exportsFields || [\"exports\"]),\n\t\timportsFields: new Set(options.importsFields || [\"imports\"]),\n\t\tconditionNames: new Set(options.conditionNames),\n\t\tdescriptionFiles: [\n\t\t\t...new Set(options.descriptionFiles || [\"package.json\"]),\n\t\t],\n\t\tenforceExtension:\n\t\t\toptions.enforceExtension === undefined\n\t\t\t\t? Boolean(options.extensions && options.extensions.includes(\"\"))\n\t\t\t\t: options.enforceExtension,\n\t\textensions: new Set(options.extensions || [\".js\", \".json\", \".node\"]),\n\t\textensionAlias: options.extensionAlias\n\t\t\t? Object.keys(options.extensionAlias).map((k) => ({\n\t\t\t\t\textension: k,\n\t\t\t\t\talias: /** @type {ExtensionAliasOptions} */ (options.extensionAlias)[\n\t\t\t\t\t\tk\n\t\t\t\t\t],\n\t\t\t\t}))\n\t\t\t: [],\n\t\tfileSystem: options.useSyncFileSystemCalls\n\t\t\t? new SyncAsyncFileSystemDecorator(\n\t\t\t\t\t/** @type {SyncFileSystem} */ (\n\t\t\t\t\t\t/** @type {unknown} */ (options.fileSystem)\n\t\t\t\t\t),\n\t\t\t\t)\n\t\t\t: options.fileSystem,\n\t\tunsafeCache:\n\t\t\toptions.unsafeCache && typeof options.unsafeCache !== \"object\"\n\t\t\t\t? /** @type {Cache} */ ({})\n\t\t\t\t: options.unsafeCache || false,\n\t\tsymlinks: typeof options.symlinks !== \"undefined\" ? options.symlinks : true,\n\t\tresolver: options.resolver,\n\t\tmodules: mergeFilteredToArray(\n\t\t\tArray.isArray(options.modules)\n\t\t\t\t? options.modules\n\t\t\t\t: options.modules\n\t\t\t\t\t? [options.modules]\n\t\t\t\t\t: [\"node_modules\"],\n\t\t\t(item) => {\n\t\t\t\tconst type = getType(item);\n\t\t\t\treturn type === PathType.Normal || type === PathType.Relative;\n\t\t\t},\n\t\t),\n\t\tmainFields,\n\t\tmainFiles: new Set(options.mainFiles || [\"index\"]),\n\t\tplugins: options.plugins || [],\n\t\tpnpApi: processPnpApiOption(options.pnpApi),\n\t\troots: new Set(options.roots || undefined),\n\t\tfullySpecified: options.fullySpecified || false,\n\t\tresolveToContext: options.resolveToContext || false,\n\t\tpreferRelative: options.preferRelative || false,\n\t\tpreferAbsolute: options.preferAbsolute || false,\n\t\trestrictions: new Set(options.restrictions),\n\t};\n}\n\n/**\n * @param {UserResolveOptions} options resolve options\n * @returns {Resolver} created resolver\n */\nmodule.exports.createResolver = function createResolver(options) {\n\tconst normalizedOptions = createOptions(options);\n\n\tconst {\n\t\talias,\n\t\tfallback,\n\t\taliasFields,\n\t\tcachePredicate,\n\t\tcacheWithContext,\n\t\tconditionNames,\n\t\tdescriptionFiles,\n\t\tenforceExtension,\n\t\texportsFields,\n\t\textensionAlias,\n\t\timportsFields,\n\t\textensions,\n\t\tfileSystem,\n\t\tfullySpecified,\n\t\tmainFields,\n\t\tmainFiles,\n\t\tmodules,\n\t\tplugins: userPlugins,\n\t\tpnpApi,\n\t\tresolveToContext,\n\t\tpreferRelative,\n\t\tpreferAbsolute,\n\t\tsymlinks,\n\t\tunsafeCache,\n\t\tresolver: customResolver,\n\t\trestrictions,\n\t\troots,\n\t} = normalizedOptions;\n\n\tconst plugins = [...userPlugins];\n\n\tconst resolver =\n\t\tcustomResolver || new Resolver(fileSystem, normalizedOptions);\n\n\t// // pipeline ////\n\n\tresolver.ensureHook(\"resolve\");\n\tresolver.ensureHook(\"internalResolve\");\n\tresolver.ensureHook(\"newInternalResolve\");\n\tresolver.ensureHook(\"parsedResolve\");\n\tresolver.ensureHook(\"describedResolve\");\n\tresolver.ensureHook(\"rawResolve\");\n\tresolver.ensureHook(\"normalResolve\");\n\tresolver.ensureHook(\"internal\");\n\tresolver.ensureHook(\"rawModule\");\n\tresolver.ensureHook(\"alternateRawModule\");\n\tresolver.ensureHook(\"module\");\n\tresolver.ensureHook(\"resolveAsModule\");\n\tresolver.ensureHook(\"undescribedResolveInPackage\");\n\tresolver.ensureHook(\"resolveInPackage\");\n\tresolver.ensureHook(\"resolveInExistingDirectory\");\n\tresolver.ensureHook(\"relative\");\n\tresolver.ensureHook(\"describedRelative\");\n\tresolver.ensureHook(\"directory\");\n\tresolver.ensureHook(\"undescribedExistingDirectory\");\n\tresolver.ensureHook(\"existingDirectory\");\n\tresolver.ensureHook(\"undescribedRawFile\");\n\tresolver.ensureHook(\"rawFile\");\n\tresolver.ensureHook(\"file\");\n\tresolver.ensureHook(\"finalFile\");\n\tresolver.ensureHook(\"existingFile\");\n\tresolver.ensureHook(\"resolved\");\n\n\t// TODO remove in next major\n\t// cspell:word Interal\n\t// Backward-compat\n\t// @ts-expect-error\n\tresolver.hooks.newInteralResolve = resolver.hooks.newInternalResolve;\n\n\t// resolve\n\tfor (const { source, resolveOptions } of [\n\t\t{ source: \"resolve\", resolveOptions: { fullySpecified } },\n\t\t{ source: \"internal-resolve\", resolveOptions: { fullySpecified: false } },\n\t]) {\n\t\tif (unsafeCache) {\n\t\t\tplugins.push(\n\t\t\t\tnew UnsafeCachePlugin(\n\t\t\t\t\tsource,\n\t\t\t\t\tcachePredicate,\n\t\t\t\t\t/** @type {import(\"./UnsafeCachePlugin\").Cache} */ (unsafeCache),\n\t\t\t\t\tcacheWithContext,\n\t\t\t\t\t`new-${source}`,\n\t\t\t\t),\n\t\t\t);\n\t\t\tplugins.push(\n\t\t\t\tnew ParsePlugin(`new-${source}`, resolveOptions, \"parsed-resolve\"),\n\t\t\t);\n\t\t} else {\n\t\t\tplugins.push(new ParsePlugin(source, resolveOptions, \"parsed-resolve\"));\n\t\t}\n\t}\n\n\t// parsed-resolve\n\tplugins.push(\n\t\tnew DescriptionFilePlugin(\n\t\t\t\"parsed-resolve\",\n\t\t\tdescriptionFiles,\n\t\t\tfalse,\n\t\t\t\"described-resolve\",\n\t\t),\n\t);\n\tplugins.push(new NextPlugin(\"after-parsed-resolve\", \"described-resolve\"));\n\n\t// described-resolve\n\tplugins.push(new NextPlugin(\"described-resolve\", \"raw-resolve\"));\n\tif (fallback.length > 0) {\n\t\tplugins.push(\n\t\t\tnew AliasPlugin(\"described-resolve\", fallback, \"internal-resolve\"),\n\t\t);\n\t}\n\n\t// raw-resolve\n\tif (alias.length > 0) {\n\t\tplugins.push(new AliasPlugin(\"raw-resolve\", alias, \"internal-resolve\"));\n\t}\n\tfor (const item of aliasFields) {\n\t\tplugins.push(new AliasFieldPlugin(\"raw-resolve\", item, \"internal-resolve\"));\n\t}\n\tfor (const item of extensionAlias) {\n\t\tplugins.push(\n\t\t\tnew ExtensionAliasPlugin(\"raw-resolve\", item, \"normal-resolve\"),\n\t\t);\n\t}\n\tplugins.push(new NextPlugin(\"raw-resolve\", \"normal-resolve\"));\n\n\t// normal-resolve\n\tif (preferRelative) {\n\t\tplugins.push(new JoinRequestPlugin(\"after-normal-resolve\", \"relative\"));\n\t}\n\tplugins.push(\n\t\tnew ConditionalPlugin(\n\t\t\t\"after-normal-resolve\",\n\t\t\t{ module: true },\n\t\t\t\"resolve as module\",\n\t\t\tfalse,\n\t\t\t\"raw-module\",\n\t\t),\n\t);\n\tplugins.push(\n\t\tnew ConditionalPlugin(\n\t\t\t\"after-normal-resolve\",\n\t\t\t{ internal: true },\n\t\t\t\"resolve as internal import\",\n\t\t\tfalse,\n\t\t\t\"internal\",\n\t\t),\n\t);\n\tif (preferAbsolute) {\n\t\tplugins.push(new JoinRequestPlugin(\"after-normal-resolve\", \"relative\"));\n\t}\n\tif (roots.size > 0) {\n\t\tplugins.push(new RootsPlugin(\"after-normal-resolve\", roots, \"relative\"));\n\t}\n\tif (!preferRelative && !preferAbsolute) {\n\t\tplugins.push(new JoinRequestPlugin(\"after-normal-resolve\", \"relative\"));\n\t}\n\n\t// internal\n\tfor (const importsField of importsFields) {\n\t\tplugins.push(\n\t\t\tnew ImportsFieldPlugin(\n\t\t\t\t\"internal\",\n\t\t\t\tconditionNames,\n\t\t\t\timportsField,\n\t\t\t\t\"relative\",\n\t\t\t\t\"internal-resolve\",\n\t\t\t),\n\t\t);\n\t}\n\n\t// raw-module\n\tfor (const exportsField of exportsFields) {\n\t\tplugins.push(\n\t\t\tnew SelfReferencePlugin(\"raw-module\", exportsField, \"resolve-as-module\"),\n\t\t);\n\t}\n\tfor (const item of modules) {\n\t\tif (Array.isArray(item)) {\n\t\t\tif (item.includes(\"node_modules\") && pnpApi) {\n\t\t\t\tplugins.push(\n\t\t\t\t\tnew ModulesInHierarchicalDirectoriesPlugin(\n\t\t\t\t\t\t\"raw-module\",\n\t\t\t\t\t\titem.filter((i) => i !== \"node_modules\"),\n\t\t\t\t\t\t\"module\",\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t\t\tplugins.push(\n\t\t\t\t\tnew PnpPlugin(\n\t\t\t\t\t\t\"raw-module\",\n\t\t\t\t\t\tpnpApi,\n\t\t\t\t\t\t\"undescribed-resolve-in-package\",\n\t\t\t\t\t\t\"alternate-raw-module\",\n\t\t\t\t\t),\n\t\t\t\t);\n\n\t\t\t\tplugins.push(\n\t\t\t\t\tnew ModulesInHierarchicalDirectoriesPlugin(\n\t\t\t\t\t\t\"alternate-raw-module\",\n\t\t\t\t\t\t[\"node_modules\"],\n\t\t\t\t\t\t\"module\",\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tplugins.push(\n\t\t\t\t\tnew ModulesInHierarchicalDirectoriesPlugin(\n\t\t\t\t\t\t\"raw-module\",\n\t\t\t\t\t\titem,\n\t\t\t\t\t\t\"module\",\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t\t}\n\t\t} else {\n\t\t\tplugins.push(new ModulesInRootPlugin(\"raw-module\", item, \"module\"));\n\t\t}\n\t}\n\n\t// module\n\tplugins.push(new JoinRequestPartPlugin(\"module\", \"resolve-as-module\"));\n\n\t// resolve-as-module\n\tif (!resolveToContext) {\n\t\tplugins.push(\n\t\t\tnew ConditionalPlugin(\n\t\t\t\t\"resolve-as-module\",\n\t\t\t\t{ directory: false, request: \".\" },\n\t\t\t\t\"single file module\",\n\t\t\t\ttrue,\n\t\t\t\t\"undescribed-raw-file\",\n\t\t\t),\n\t\t);\n\t}\n\tplugins.push(\n\t\tnew DirectoryExistsPlugin(\n\t\t\t\"resolve-as-module\",\n\t\t\t\"undescribed-resolve-in-package\",\n\t\t),\n\t);\n\n\t// undescribed-resolve-in-package\n\tplugins.push(\n\t\tnew DescriptionFilePlugin(\n\t\t\t\"undescribed-resolve-in-package\",\n\t\t\tdescriptionFiles,\n\t\t\tfalse,\n\t\t\t\"resolve-in-package\",\n\t\t),\n\t);\n\tplugins.push(\n\t\tnew NextPlugin(\n\t\t\t\"after-undescribed-resolve-in-package\",\n\t\t\t\"resolve-in-package\",\n\t\t),\n\t);\n\n\t// resolve-in-package\n\tfor (const exportsField of exportsFields) {\n\t\tplugins.push(\n\t\t\tnew ExportsFieldPlugin(\n\t\t\t\t\"resolve-in-package\",\n\t\t\t\tconditionNames,\n\t\t\t\texportsField,\n\t\t\t\t\"relative\",\n\t\t\t),\n\t\t);\n\t}\n\tplugins.push(\n\t\tnew NextPlugin(\"resolve-in-package\", \"resolve-in-existing-directory\"),\n\t);\n\n\t// resolve-in-existing-directory\n\tplugins.push(\n\t\tnew JoinRequestPlugin(\"resolve-in-existing-directory\", \"relative\"),\n\t);\n\n\t// relative\n\tplugins.push(\n\t\tnew DescriptionFilePlugin(\n\t\t\t\"relative\",\n\t\t\tdescriptionFiles,\n\t\t\ttrue,\n\t\t\t\"described-relative\",\n\t\t),\n\t);\n\tplugins.push(new NextPlugin(\"after-relative\", \"described-relative\"));\n\n\t// described-relative\n\tif (resolveToContext) {\n\t\tplugins.push(new NextPlugin(\"described-relative\", \"directory\"));\n\t} else {\n\t\tplugins.push(\n\t\t\tnew ConditionalPlugin(\n\t\t\t\t\"described-relative\",\n\t\t\t\t{ directory: false },\n\t\t\t\tnull,\n\t\t\t\ttrue,\n\t\t\t\t\"raw-file\",\n\t\t\t),\n\t\t);\n\t\tplugins.push(\n\t\t\tnew ConditionalPlugin(\n\t\t\t\t\"described-relative\",\n\t\t\t\t{ fullySpecified: false },\n\t\t\t\t\"as directory\",\n\t\t\t\ttrue,\n\t\t\t\t\"directory\",\n\t\t\t),\n\t\t);\n\t}\n\n\t// directory\n\tplugins.push(\n\t\tnew DirectoryExistsPlugin(\"directory\", \"undescribed-existing-directory\"),\n\t);\n\n\tif (resolveToContext) {\n\t\t// undescribed-existing-directory\n\t\tplugins.push(new NextPlugin(\"undescribed-existing-directory\", \"resolved\"));\n\t} else {\n\t\t// undescribed-existing-directory\n\t\tplugins.push(\n\t\t\tnew DescriptionFilePlugin(\n\t\t\t\t\"undescribed-existing-directory\",\n\t\t\t\tdescriptionFiles,\n\t\t\t\tfalse,\n\t\t\t\t\"existing-directory\",\n\t\t\t),\n\t\t);\n\t\tfor (const item of mainFiles) {\n\t\t\tplugins.push(\n\t\t\t\tnew UseFilePlugin(\n\t\t\t\t\t\"undescribed-existing-directory\",\n\t\t\t\t\titem,\n\t\t\t\t\t\"undescribed-raw-file\",\n\t\t\t\t),\n\t\t\t);\n\t\t}\n\n\t\t// described-existing-directory\n\t\tfor (const item of mainFields) {\n\t\t\tplugins.push(\n\t\t\t\tnew MainFieldPlugin(\n\t\t\t\t\t\"existing-directory\",\n\t\t\t\t\titem,\n\t\t\t\t\t\"resolve-in-existing-directory\",\n\t\t\t\t),\n\t\t\t);\n\t\t}\n\t\tfor (const item of mainFiles) {\n\t\t\tplugins.push(\n\t\t\t\tnew UseFilePlugin(\"existing-directory\", item, \"undescribed-raw-file\"),\n\t\t\t);\n\t\t}\n\n\t\t// undescribed-raw-file\n\t\tplugins.push(\n\t\t\tnew DescriptionFilePlugin(\n\t\t\t\t\"undescribed-raw-file\",\n\t\t\t\tdescriptionFiles,\n\t\t\t\ttrue,\n\t\t\t\t\"raw-file\",\n\t\t\t),\n\t\t);\n\t\tplugins.push(new NextPlugin(\"after-undescribed-raw-file\", \"raw-file\"));\n\n\t\t// raw-file\n\t\tplugins.push(\n\t\t\tnew ConditionalPlugin(\n\t\t\t\t\"raw-file\",\n\t\t\t\t{ fullySpecified: true },\n\t\t\t\tnull,\n\t\t\t\tfalse,\n\t\t\t\t\"file\",\n\t\t\t),\n\t\t);\n\t\tif (!enforceExtension) {\n\t\t\tplugins.push(new TryNextPlugin(\"raw-file\", \"no extension\", \"file\"));\n\t\t}\n\t\tfor (const item of extensions) {\n\t\t\tplugins.push(new AppendPlugin(\"raw-file\", item, \"file\"));\n\t\t}\n\n\t\t// file\n\t\tif (alias.length > 0) {\n\t\t\tplugins.push(new AliasPlugin(\"file\", alias, \"internal-resolve\"));\n\t\t}\n\t\tfor (const item of aliasFields) {\n\t\t\tplugins.push(new AliasFieldPlugin(\"file\", item, \"internal-resolve\"));\n\t\t}\n\t\tplugins.push(new NextPlugin(\"file\", \"final-file\"));\n\n\t\t// final-file\n\t\tplugins.push(new FileExistsPlugin(\"final-file\", \"existing-file\"));\n\n\t\t// existing-file\n\t\tif (symlinks) {\n\t\t\tplugins.push(new SymlinkPlugin(\"existing-file\", \"existing-file\"));\n\t\t}\n\t\tplugins.push(new NextPlugin(\"existing-file\", \"resolved\"));\n\t}\n\n\tconst { resolved } =\n\t\t/** @type {KnownHooks & EnsuredHooks} */\n\t\t(resolver.hooks);\n\n\t// resolved\n\tif (restrictions.size > 0) {\n\t\tplugins.push(new RestrictionsPlugin(resolved, restrictions));\n\t}\n\n\tplugins.push(new ResultPlugin(resolved));\n\n\t// // RESOLVER ////\n\n\tfor (const plugin of plugins) {\n\t\tif (typeof plugin === \"function\") {\n\t\t\t/** @type {(this: Resolver, resolver: Resolver) => void} */\n\t\t\t(plugin).call(resolver, resolver);\n\t\t} else if (plugin) {\n\t\t\tplugin.apply(resolver);\n\t\t}\n\t}\n\n\treturn resolver;\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}